{% extends 'public_base.html' %}
{% load static %}

{#
    instruments = list of all instruments.
#}

{% block load_css %}
    <link rel="stylesheet" type="text/css" href='{% static "css/register_member.css" %}'>
{% endblock %}

{% block header %}
<nav class="navbar navbar-expand-md fixed-top navbar-dark navbar-custom">

    <!-- Logo -->
    <a class="navbar-brand brand" href="{% url 'public:welcome' %}">Houston Chamber Music Network</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">

        <!-- Navbar links -->
        <ul class="navbar-nav mr-4">
            <li class="nav-item active">
                <a class="nav-link" href="{% url 'public:new_member' %}">REGISTER AS MEMBER</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="{% url 'public:new_coach' %}">REGISTER AS COACH</a>
            </li>
        </ul>

        <!-- Navbar right -->
        <ul class="navbar-nav ml-auto">
            <!-- Link to external login: -->
            <li class="nav-item">
                <a class="nav-link" href="{% url 'public:login' %}">LOGIN</a>
            </li>
        </ul>
    </div>
</nav>
{% endblock %}

{% block main_content %}
<header class="main">
    <div class="container outer-container">
        <div class="container-fluid inner-container col-xs-12 col-sm-10 col-md-6">
            <div class="row justify-content-center form-container">
                <form role="form" action="{% url 'users:member_registration_handler' %}" id="form-container" method="post">
                    {% csrf_token %}

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Member Registration Form</h3>
                        </div>
                    </div>

                    <!-- Divider: -->
                    <div class="panel panel-default divider-panel">
                        <img class="col-xs-10 col-sm-10 col-md-8" src='{% static "images/divider9.png" %}' alt="" class="img-responsive">
                    </div>

                    <!-- Overlay: -->
                    <div class="panel panel-default">
                        <h5>Before filling out form, please read the following:</h5>
                    <!-- End overlay: -->
                    </div>

                    <!-- Divider: -->
                    <div class="panel panel-default divider-panel">
                        <img class="col-xs-10 col-sm-10 col-md-8" src='{% static "images/divider9.png" %}' alt="" class="img-responsive">
                    </div>

                    <!-- Basic information section: -->
                    <h5>Basic information:</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <input type="text" name="first_name" id="first_name" class="form-control input-sm" placeholder="First name" value="{{ old_data.first_name }}">
                                <div class="error-message">
                                    <p> 
                                    {% if 'first_name' in errors %}
                                        {{ errors.first_name }}
                                    {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <input type="text" name="last_name" id="last_name" class="form-control input-sm" placeholder="Last name"value="{{ old_data.last_name }}">
                                <div class="error-message">
                                    <p>
                                    {% if 'last_name' in errors %}
                                        {{ errors.last_name }}
                                    {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-group">
                                <input type="email" name="email" id="email" class="form-control input-sm" placeholder="Email address" value="{{ old_data.email }}">
                                <div class="error-message">
                                    <p>
                                    {% if 'email' in errors %}
                                        {{ errors.email }}
                                    {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                    <!-- End basic information section: -->
                    </div>

                    <!-- Address and phone section: -->
                    <h5>Address:</h5>
                    <div class="row">
                        <div class="col-md-8">
                            <div class="form-group">
                                <input type="text" name="street_address" id="street_address" class="form-control input-sm" placeholder="Street address" value="{{ old_data.street_address }}">
                                <div class="error-message">
                                    <p>
                                    {% if 'street_address' in errors %}
                                        {{ errors.street_address }}
                                    {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <input type="text" name="unit_number" id="unit_number" class="form-control input-sm" placeholder="Unit" value="{{ old_data.unit_number }}">
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-group">
                                <input type="text" name="city" id="city" class="form-control input-sm" placeholder="City" value="{{ old_data.city }}">
                                <div class="error-message">
                                    <p>
                                    {% if 'city' in errors %}
                                        {{ errors.city }}
                                    {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <select class="form-control" name="state" id="state">
                                    <option>Texas</option>
                                    <option>Alabama</option>
                                    <option>Alaska</option>
                                    <option>Arizona</option>
                                    <option>Arkansas</option>
                                    <option>California</option>
                                    <option>Colorado</option>
                                    <option>Connecticut</option>
                                    <option>Delaware</option>
                                    <option>District of Columbia</option>
                                    <option>Florida</option>
                                    <option>Georgia</option>
                                    <option>Hawaii</option>
                                    <option>Idaho</option>
                                    <option>Illinois</option>
                                    <option>Indiana</option>
                                    <option>Iowa</option>
                                    <option>Kansas</option>
                                    <option>Kentucky</option>
                                    <option>Louisiana</option>
                                    <option>Maine</option>
                                    <option>Maryland</option>
                                    <option>Massachusetts</option>
                                    <option>Michigan</option>
                                    <option>Minnesota</option>
                                    <option>Mississippi</option>
                                    <option>Missouri</option>
                                    <option>Montana</option>
                                    <option>Nebraska</option>
                                    <option>Nevada</option>
                                    <option>New Hampshire</option>
                                    <option>New Jersey</option>
                                    <option>New Mexico</option>
                                    <option>New York</option>
                                    <option>North Carolina</option>
                                    <option>North Dakota</option>
                                    <option>Ohio</option>
                                    <option>Oklahoma</option>
                                    <option>Oregon</option>
                                    <option>Pennsylvania</option>
                                    <option>Rhode Island</option>
                                    <option>South Carolina</option>
                                    <option>South Dakota</option>
                                    <option>Tennessee</option>
                                    <option>Utah</option>
                                    <option>Vermont</option>
                                    <option>Virginia</option>
                                    <option>Washington</option>
                                    <option>West Virginia</option>
                                    <option>Wisconsin</option>
                                    <option>Wyoming</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <input type="text" name="zip_code" id="zip_code" class="form-control input-sm" placeholder="Zip" value="{{ old_data.zip_code }}">
                                <div class="error-message">
                                    <p>
                                    {% if 'zip_code' in errors %}
                                        {{ errors.zip_code }}
                                    {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <h5>Location:</h5>
                        <textarea type="area" name="area" id="area" class="form-control textarea" rows="4" placeholder="Please tell us briefly in what part of town you live and how far you are willing to travel for rehearsals and performances. i.e., 'I live in the Heights but I'm willing to drive anywhere within the loop.'">{{ old_data.area }}</textarea>
                        <div class="error-message">
                            <p>
                            {% if 'area' in errors %}
                                {{ errors.area }}
                            {% endif %}
                            </p>
                        </div>
                    </div>

                    <div class="row" id="phone-row">
                        <div class="col-md-4">
                            <h5>Phone:</h5>
                        </div>
                        <div class="col-md-8">
                            <div class="form-group" align="right">
                                (<input type="tel" name="tel1" size="3" pattern="\d{3}" placeholder="xxx" value="{{ old_data.tel1 }}" maxlength="3"/>) 
                                <input type="tel" name="tel2" size="3" pattern="\d{3}" placeholder="xxx" value="{{ old_data.tel2 }}" maxlength="3"/> - 
                                <input type="tel" name="tel3" size="4" pattern="\d{4}" placeholder="xxxx" value="{{ old_data.tel3 }}" maxlength="4"/>
                                <div class="error-message">
                                    <p>
                                    {% if 'phone_number' in errors %}
                                        {{ errors.phone_number }}
                                    {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section for musical information: -->
                    <h5>Musical information:</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <select class="form-control" name="primary_instrument" id="primary_instrument" placeholder="Primary instrument">
                                    {% if not old_data.primary_instrument %}
                                        <option selected disabled>Primary instrument</option>
                                            {% for instrument in instruments %}
                                                <option value='{{ instrument.id }}'>{{ instrument }}</option>
                                            {% endfor %}
                                    {% else %}
                                        <option disabled>Primary instrument</option>
                                            {% for instrument in instruments %}
                                                <option {% if old_data.primary_instrument == instrument.id|stringformat:"i" %} selected {% endif %} value='{{ instrument.id }}'>{{ instrument }}</option>
                                            {% endfor %}
                                    {% endif %}
                                </select>
                                <div class="error-message">
                                    <p>
                                        {% if 'primary_instrument' in errors %}
                                            {{ errors.primary_instrument }}
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <select class="form-control" name="secondary_instrument" id="secondary_instrument" placeholder="Secondary instrument">
                                    {% if not old_data.secondary_instrument %}
                                        <option selected disabled>Secondary instrument</option>
                                            <option>None</option>
                                            {% for instrument in instruments %}
                                                <option value='{{ instrument.id }}'>{{ instrument }}</option>
                                            {% endfor %}
                                    {% else %}
                                        <option disabled>Secondary instrument</option>
                                            {% for instrument in instruments %}
                                                <option {% if old_data.secondary_instrument == instrument.id|stringformat:"i" %} selected {% endif %} value='{{ instrument.id }}'>{{ instrument }}</option>
                                            {% endfor %}
                                    {% endif %}
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <textarea type="bio" name="bio" id="bio" class="form-control textarea" rows="5" placeholder="Brief musical bio">{{ old_data.bio }}</textarea>
                        <div class="error-message">
                            <p>
                            {% if 'bio' in errors %}
                                {{ errors.bio }}
                            {% endif %}
                            </p>
                        </div>
                    </div>

                    <div class="form-group">
                        <select class="form-control" name="rating" id="rating" placeholder="Rating">
                            <option {% if not old_data.rating %} selected {% endif %} disabled>Rating</option>
                            {% for rating in rating_choices %}
                                {% if rating.0 != 'S' %}
                                <option {% if old_data.rating == rating.0 %} selected {% endif %}value="{{ rating.0 }}">{{ rating.1 }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                        <div class="error-message">
                            <p>
                            {% if 'rating' in errors %}
                                {{ errors.rating }}
                            {% endif %}
                            </p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <input type="submit" value="SUBMIT FORM" class="btn btn-reg btn-info btn-block">
                        </div>
                    </div>
                <!-- End form: -->
                </form>
            <!-- End form-container: -->
            </div>
        <!-- End inner-container: -->
        </div>
    <!-- End outer-container: -->
    </div>
<!-- End main: -->
</header>

{% endblock %}
